(self.webpackChunkChecador=self.webpackChunkChecador||[]).push([[6671],{6671:(e,o,t)=>{"use strict";t.r(o),t.d(o,{RegistroChecadaPageModule:()=>m});var n=t(8583),i=t(665),r=t(3083),s=t(649),a=t(4762),c=t(639),l=t(1491);function g(e,o){if(1&e&&(c.TgZ(0,"ion-item"),c.TgZ(1,"ion-avatar"),c._UZ(2,"img",28),c.qZA(),c.TgZ(3,"ion-label",29),c.TgZ(4,"b"),c._uU(5),c.qZA(),c._uU(6),c._UZ(7,"br"),c.TgZ(8,"b"),c._uU(9),c.qZA(),c.qZA(),c.qZA()),2&e){const e=o.$implicit;c.xp6(2),c.Q6J("src",e.img_,c.LSH),c.xp6(3),c.hij(" ",e.NoEmpleado," "),c.xp6(1),c.hij(" ",e.Nombre," "),c.xp6(3),c.hij(" ",e.acciones,"")}}const d=[{path:"",component:(()=>{class e{constructor(e,o,t,n){this.api=e,this.toastController=o,this.router=t,this.loadingController=n,this.NoEmpleado_="",this.items=[]}presentLoading(){return(0,a.mG)(this,void 0,void 0,function*(){const e=yield this.loadingController.create({cssClass:"my-custom-class",message:"Enviando registros Locales",duration:2e3});yield e.present(),yield e.onDidDismiss()})}presentLoadingWithOptions(){return(0,a.mG)(this,void 0,void 0,function*(){const e=yield this.loadingController.create({spinner:null,duration:3e3,message:"No se encuentran registros locales",translucent:!0,cssClass:"custom-class custom-loading",backdropDismiss:!0});yield e.present(),yield e.onDidDismiss()})}ngOnInit(){0==(JSON.parse(localStorage.getItem("UsuarioLogin"))||[]).length&&this.router.navigate(["home"]),this.InsertarRegistrosLocales()}InsertarRegistrosLocales(){var e=JSON.parse(localStorage.getItem("RegistroChecadas"))||[];if(e.length>0)if(e.length>5){var o=[];for(let t=0;t<5;t++)o.push(e[t]);var t=e.slice(5,e.length);this.api.RegistroAllChecada(o).subscribe(e=>{localStorage.setItem("RegistroChecadas",JSON.stringify(t))},e=>{})}else this.api.RegistroAllChecada(e).subscribe(e=>{localStorage.removeItem("RegistroChecadas")},e=>{})}SendRegistersLocal(){(JSON.parse(localStorage.getItem("RegistroChecadas"))||[]).length>0?(this.presentLoading(),this.InsertarRegistrosLocales()):this.presentLoadingWithOptions()}Logout(){localStorage.removeItem("UsuarioLogin"),this.router.navigate(["home"])}numberOnlyValidation(e){let o=String.fromCharCode(e.charCode);/[0-9.,]/.test(o)||e.preventDefault()}addNumber(e){this.NoEmpleado_.length<=6?this.NoEmpleado_=this.NoEmpleado_+""+e:this.toastController.create({message:"Alcanz\xf3 el tama\xf1o m\xe1ximo de d\xedgitos.",duration:2e3,color:"warning"}).then(e=>{e.present()})}RemoveNumber(){this.NoEmpleado_=this.NoEmpleado_.substring(0,this.NoEmpleado_.length-1)}ClearInput(){this.NoEmpleado_=""}PostChecada(e){if(null!=this.NoEmpleado_&&""!=this.NoEmpleado_){var o=JSON.parse(localStorage.getItem("UsuarioLogin"))||[],t=this.NoEmpleado_,n="",i="";switch(e){case 1:n="Entrada Laborar",i="..\\assets\\img\\work.png";break;case 2:n="Salida Laborar",i="..\\assets\\img\\work.png";break;case 3:n="Salida Comer",i="..\\assets\\img\\food.png";break;case 4:n="Regreso comer",i="..\\assets\\img\\food.png";break;case 5:n="Salida Permiso",i="..\\assets\\img\\clock.png";break;case 6:n="Regreso Permiso",i="..\\assets\\img\\clock.png"}this.api.UserExist(this.NoEmpleado_).subscribe(r=>{var s=r;if(r.IDEMPLEADO>0){var a=new Date,c=[];c.push({ID:0,NOEMPLEADO:parseInt(t),IDACCION:parseInt(e),ACTIVO:!0,IDUSUARIO:parseInt(o.IDEMPLEADO),FECHA:a.toLocaleString("sv-SE")}),this.api.RegistroAllChecada(c).subscribe(e=>{this.items.length<=1||this.items.shift(),this.items.push({NoEmpleado:s.NOEMPLEADO,Nombre:s.NOMBRE+" "+s.APATERNO+" "+s.AMATERNO,acciones:n,img_:i}),this.toastController.create({message:"Registro exitoso, "+s.NOMBRE+" "+s.APATERNO+" "+s.AMATERNO,duration:2e3,color:"success"}).then(e=>{e.present()})},r=>{var a=JSON.parse(localStorage.getItem("AllNoEmp"))||[],c=!1,l="";if(a.forEach(e=>{e.NOEMPLEADO==t&&(c=!0,l=e.NOMBRE+" "+e.APATERNO+" "+e.AMATERNO)}),c){var g=new Date,d={ID:0,NOEMPLEADO:parseInt(t),IDACCION:parseInt(e),ACTIVO:!0,IDUSUARIO:parseInt(o.IDEMPLEADO),FECHA:g.toLocaleString("sv-SE")},u=JSON.parse(localStorage.getItem("RegistroChecadas"))||[];u.push(d),localStorage.setItem("RegistroChecadas",JSON.stringify(u)),this.items.length<=1||this.items.shift(),this.items.push({NoEmpleado:s.NOEMPLEADO,Nombre:l,acciones:n,img_:i}),this.toastController.create({message:"Registro almacenado localmente,"+l,duration:2e3,color:"secondary"}).then(e=>{e.present()})}else this.toastController.create({message:"N\xfamero de empleado no existente",duration:2e3,color:"warning"}).then(e=>{e.present()})})}else this.toastController.create({message:"N\xfamero de empleado no existente",duration:2e3,color:"warning"}).then(e=>{e.present()})},r=>{var s=JSON.parse(localStorage.getItem("AllNoEmp"))||[],a=!1,c="";if(s.forEach(e=>{e.NOEMPLEADO==t&&(a=!0,c=e.NOMBRE+" "+e.APATERNO+" "+e.AMATERNO)}),a){var l=new Date,g={ID:0,NOEMPLEADO:parseInt(t),IDACCION:parseInt(e),ACTIVO:!0,IDUSUARIO:parseInt(o.IDEMPLEADO),FECHA:l.toLocaleString("sv-SE")},d=JSON.parse(localStorage.getItem("RegistroChecadas"))||[];d.push(g),localStorage.setItem("RegistroChecadas",JSON.stringify(d)),this.items.length<=1||this.items.shift(),this.items.push({NoEmpleado:t,Nombre:c,acciones:n,img_:i}),this.toastController.create({message:"Registro almacenado localmente",duration:2e3,color:"secondary"}).then(e=>{e.present()})}else this.toastController.create({message:"N\xfamero de empleado no existente",duration:4e3,color:"warning"}).then(e=>{e.present()})}),this.NoEmpleado_=""}else this.toastController.create({message:"Ingresa Numero de empleado",duration:2e3,color:"warning"}).then(e=>{e.present()})}}return e.\u0275fac=function(o){return new(o||e)(c.Y36(l.s),c.Y36(r.yF),c.Y36(s.F0),c.Y36(r.HT))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-registro-checada"]],decls:98,vars:2,consts:[[2,"display","flex","align-items","center","justify-content","center"],[2,"display","flex","align-items","right","justify-content","right"],["size","small","color","danger","fill","outline",3,"click"],["name","log-out-outline"],["id","container"],[1,"row",2,"align-items","flex-start"],[1,"item-content"],["position","floating"],["type","text","maxlength","6","readonly","",3,"ngModel","ngModelChange","keypress"],[1,"col-xs-2","col-sm-4","col-md-3","col-md-offset-1"],["expand","block","size","large","color","primary","fill","outline",3,"click"],[1,"col-xs-4","col-sm-4","col-md-3","col-md-offset-1"],["expand","block","size","large","color","danger","fill","outline",3,"click"],["name","close-outline"],["expand","block","size","large","color","warning","fill","outline",3,"click"],["name","backspace-outline"],[1,"col-xs-12","col-sm-6","col-md-4","col-md-offset-1"],["expand","block","size","large","color","dark","fill","outline",3,"click"],["src","..\\assets\\img\\work.png",2,"width","35px"],["expand","block","size","large","color","success","fill","outline",3,"click"],["src","..\\assets\\img\\food.png",2,"width","35px"],["expand","block","size","large","color","medium","fill","outline",3,"click"],["src","..\\assets\\img\\clock.png",2,"width","35px"],[4,"ngFor","ngForOf"],[1,"row"],[1,"col-xs-12","col-sm-12","col-md-12","col-md-offset-1",2,"display","flex","align-items","center","justify-content","center"],["size","large","color","secondary","fill","outline",3,"click"],["name","cloud-upload","color","secondary",2,"padding-left","5px"],[3,"src"],["background","warning","color","dark"]],template:function(e,o){1&e&&(c.TgZ(0,"ion-header"),c.TgZ(1,"ion-toolbar"),c.TgZ(2,"ion-title"),c.TgZ(3,"div",0),c._uU(4," Registro Checadas "),c.qZA(),c.qZA(),c.TgZ(5,"div",1),c.TgZ(6,"ion-button",2),c.NdJ("click",function(){return o.Logout()}),c._uU(7,"Salir\xa0 "),c._UZ(8,"ion-icon",3),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(9,"ion-content"),c.TgZ(10,"div",4),c.TgZ(11,"div",5),c.TgZ(12,"ion-item",6),c.TgZ(13,"ion-label",7),c._uU(14,"N\xfamero de empleado"),c.qZA(),c.TgZ(15,"ion-input",8),c.NdJ("ngModelChange",function(e){return o.NoEmpleado_=e})("keypress",function(e){return o.numberOnlyValidation(e)}),c.qZA(),c.qZA(),c._UZ(16,"br"),c.qZA(),c.TgZ(17,"div",5),c.TgZ(18,"div",9),c.TgZ(19,"ion-button",10),c.NdJ("click",function(){return o.addNumber(1)}),c._uU(20," 1 "),c.qZA(),c.qZA(),c.TgZ(21,"div",9),c.TgZ(22,"ion-button",10),c.NdJ("click",function(){return o.addNumber(2)}),c._uU(23," 2 "),c.qZA(),c.qZA(),c.TgZ(24,"div",9),c.TgZ(25,"ion-button",10),c.NdJ("click",function(){return o.addNumber(3)}),c._uU(26," 3 "),c.qZA(),c.qZA(),c.TgZ(27,"div",9),c.TgZ(28,"ion-button",10),c.NdJ("click",function(){return o.addNumber(4)}),c._uU(29," 4 "),c.qZA(),c.qZA(),c.TgZ(30,"div",11),c.TgZ(31,"ion-button",10),c.NdJ("click",function(){return o.addNumber(5)}),c._uU(32,"5 "),c.qZA(),c.qZA(),c.TgZ(33,"div",11),c.TgZ(34,"ion-button",10),c.NdJ("click",function(){return o.addNumber(6)}),c._uU(35,"6 "),c.qZA(),c.qZA(),c.TgZ(36,"div",11),c.TgZ(37,"ion-button",10),c.NdJ("click",function(){return o.addNumber(7)}),c._uU(38,"7 "),c.qZA(),c.qZA(),c.TgZ(39,"div",11),c.TgZ(40,"ion-button",10),c.NdJ("click",function(){return o.addNumber(8)}),c._uU(41,"8 "),c.qZA(),c.qZA(),c.TgZ(42,"div",11),c.TgZ(43,"ion-button",10),c.NdJ("click",function(){return o.addNumber(9)}),c._uU(44,"9 "),c.qZA(),c.qZA(),c.TgZ(45,"div",11),c.TgZ(46,"ion-button",10),c.NdJ("click",function(){return o.addNumber(0)}),c._uU(47,"0 "),c.qZA(),c.qZA(),c.TgZ(48,"div",11),c.TgZ(49,"ion-button",12),c.NdJ("click",function(){return o.ClearInput()}),c._UZ(50,"ion-icon",13),c.qZA(),c.qZA(),c.TgZ(51,"div",11),c.TgZ(52,"ion-button",14),c.NdJ("click",function(){return o.RemoveNumber()}),c._UZ(53,"ion-icon",15),c.qZA(),c.qZA(),c.qZA(),c._UZ(54,"hr"),c.TgZ(55,"div",5),c.TgZ(56,"div",16),c.TgZ(57,"ion-button",17),c.NdJ("click",function(){return o.PostChecada(1)}),c.TgZ(58,"small"),c._uU(59,"Entrada Laborar"),c.qZA(),c._UZ(60,"ion-img",18),c.qZA(),c.qZA(),c.TgZ(61,"div",16),c.TgZ(62,"ion-button",17),c.NdJ("click",function(){return o.PostChecada(2)}),c.TgZ(63,"small"),c._uU(64,"Salida\xa0\xa0Laborar\xa0\xa0"),c.qZA(),c._UZ(65,"ion-img",18),c.qZA(),c.qZA(),c.TgZ(66,"div",16),c.TgZ(67,"ion-button",19),c.NdJ("click",function(){return o.PostChecada(3)}),c.TgZ(68,"small"),c._uU(69,"Salida Comer"),c.qZA(),c._UZ(70,"ion-img",20),c.qZA(),c.qZA(),c.TgZ(71,"div",16),c.TgZ(72,"ion-button",19),c.NdJ("click",function(){return o.PostChecada(4)}),c.TgZ(73,"small"),c._uU(74,"Regreso comer"),c.qZA(),c._UZ(75,"ion-img",20),c.qZA(),c.qZA(),c.TgZ(76,"div",16),c.TgZ(77,"ion-button",21),c.NdJ("click",function(){return o.PostChecada(5)}),c.TgZ(78,"small"),c._uU(79,"Salida Permiso"),c.qZA(),c._UZ(80,"ion-img",22),c.qZA(),c.qZA(),c.TgZ(81,"div",16),c.TgZ(82,"ion-button",21),c.NdJ("click",function(){return o.PostChecada(6)}),c.TgZ(83,"small"),c._uU(84,"Regreso Permiso"),c.qZA(),c._UZ(85,"ion-img",22),c.qZA(),c.qZA(),c.qZA(),c.TgZ(86,"div",0),c.TgZ(87,"ion-list"),c.TgZ(88,"ion-label"),c._uU(89,"Ultimos Registros: "),c.qZA(),c.qZA(),c.qZA(),c.TgZ(90,"div",0),c.YNc(91,g,10,4,"ion-item",23),c.qZA(),c.TgZ(92,"div",24),c.TgZ(93,"div",25),c.TgZ(94,"ion-button",26),c.NdJ("click",function(){return o.SendRegistersLocal()}),c.TgZ(95,"small"),c._uU(96,"Registros locales"),c.qZA(),c._UZ(97,"ion-icon",27),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&e&&(c.xp6(15),c.Q6J("ngModel",o.NoEmpleado_),c.xp6(76),c.Q6J("ngForOf",o.items))},directives:[r.Gu,r.sr,r.wd,r.YG,r.gu,r.W2,r.Ie,r.Q$,r.pK,r.j9,i.nD,i.JJ,i.On,r.Xz,r.q_,n.sg,r.BJ],styles:["#container[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:20px;line-height:26px}#container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;line-height:22px;color:#fff;margin:30}#container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%], #container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{padding-top:5px;line-height:22px;color:#b9b9b9;margin:30}#container[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]{font-size:16px;line-height:22px;color:#8c8c8c;margin:30}#container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}#rounded[_ngcontent-%COMP%]{width:100%;height:100px;border-radius:10px;margin-bottom:10px}#container[_ngcontent-%COMP%]{width:80%;margin-left:auto;margin-right:auto}[_ngcontent-%COMP%]:root{--ion-background-color:#fff;--ion-background-color-rgb:255,255,255;--ion-text-color:#000;--ion-text-color-rgb:0,0,0;--ion-color-step-50:#f2f2f2;--ion-color-step-100:#e6e6e6;--ion-color-step-150:#d9d9d9;--ion-color-step-200:#ccc;--ion-color-step-250:#bfbfbf;--ion-color-step-300:#b3b3b3;--ion-color-step-350:#a6a6a6;--ion-color-step-400:#999;--ion-color-step-450:#8c8c8c;--ion-color-step-500:grey;--ion-color-step-550:#737373;--ion-color-step-600:#666;--ion-color-step-650:#595959;--ion-color-step-700:#4d4d4d;--ion-color-step-750:#404040;--ion-color-step-800:#333;--ion-color-step-850:#262626;--ion-color-step-900:#191919;--ion-color-step-950:#0d0d0d}.bg-style[_ngcontent-%COMP%]{background:red}#container2[_ngcontent-%COMP%]{background-color:#b8860b}.my-custom-class[_ngcontent-%COMP%]{--background:#222;--spinner-color:#fff;color:#fff}"]}),e})()}];let u=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=c.oAB({type:e}),e.\u0275inj=c.cJS({imports:[[s.Bz.forChild(d)],s.Bz]}),e})(),m=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=c.oAB({type:e}),e.\u0275inj=c.cJS({imports:[[n.ez,i.u5,r.Pc,u]]}),e})()}}]);